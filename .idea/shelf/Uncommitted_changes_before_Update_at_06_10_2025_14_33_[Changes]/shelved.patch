Index: telegram_bot/hdvaj.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import requests\r\nfrom telebot import *\r\nbot = telebot.TeleBot('TOKEN')\r\n\r\n\r\ndef pars(url): #функция парсит таблицу\r\n    url = f'{url}'\r\n    s = requests.Session()\r\n    r = s.get(url, allow_redirects=True, timeout=10)\r\n    r.encoding = 'utf-8'\r\n    table = r.text.lower()\r\n    return table\r\n\r\ndef english(table, chatid):\r\n    lastname = users[chatid]['name']\r\n    for a in table.split('\\n'):\r\n        if lastname in a:\r\n\r\n            a = a[6:]\r\n            a = a.split('\"')\r\n            s1 = float(a[0].count('1'))\r\n            s2 = float(a[1].replace(',', '.'))\r\n            # s3 = float((a[4].split(',')[-2]).replace(',', '.'))\r\n            return s1 + s2\r\n\r\n    return 'ты не в этой группе'\r\n\r\ndef history(table, chatid):\r\n    lastname = users[chatid]['name']\r\n    for a in table.split('\\n'):\r\n\r\n        if lastname in a:\r\n            a=a.split(',')\r\n            return a[-2]\r\n\r\n    return 'ты не в этой группе'\r\n\r\ndef irr(table, chatid):\r\n    lastname = users[chatid]['name']\r\n    for a in table.split('\\n'):\r\n        if lastname in a:\r\n            sum = 0\r\n            for item in a:\r\n                if item and item.replace('.', '').replace('-', '').isdigit():\r\n                    sum += int(item)\r\n\r\n            return sum\r\n\r\n    return 'ты не в этой группе'\r\n\r\ndef irs(table, chatid): #история современных международных отношений\r\n    lastname = users[chatid]['name']\r\n    table=table.replace('сул́има', 'сулима').replace('и́онова', 'ионова')\r\n\r\n    for a in table.split('\\n'):\r\n        if lastname in a:\r\n\r\n            a = [a for a in a.split(',') if a != 'н']\r\n\r\n            return sum(int(a) for a in a[1:-1])\r\n\r\n    return 'ты не в этой группе'\r\n\r\ndef org(table, chatid):\r\n    lastname = users[chatid]['name']\r\n    for a in table.split('\\n'):\r\n\r\n        if lastname in a:\r\n\r\n            a = a[12:]\r\n            a = a.split(',')\r\n            return int(a[9]) + int(a[10])\r\n\r\n    return 'ты не в этой группе'\r\n\r\ndef menedgment(table, chatid):\r\n    lastname = users[chatid]['name']\r\n    for a in table.split('\\n'):\r\n\r\n        if lastname in a:\r\n            a = a.split('\"')\r\n            return a[-2]\r\n\r\n    return 'ты не в этой группе'\r\n\r\nurl = [['ОРГ 1.2', 'https://docs.google.com/spreadsheets/d/1XQpCvLT5Nf-aQ8Mz-3VYDw0uyk-8QVKv98gLKSEQg9A/export?format=csv&id=1XQpCvLT5Nf-aQ8Mz-3VYDw0uyk-8QVKv98gLKSEQg9A&gid=0'],\r\n       ['ОРГ 2.3', 'https://docs.google.com/spreadsheets/d/1DTkjRozRpijVK0Je9iZjLkpvbLAA-l6-WGnktJGlraU/export?format=csv&id=1DTkjRozRpijVK0Je9iZjLkpvbLAA-l6-WGnktJGlraU&gid=0'],\r\n       ['ОРГ 2.1', 'https://docs.google.com/spreadsheets/d/1q9spgoTIUEbpwTqBuY5ml-Q5tSmDpuHTMx2QJnIZIBk/export?format=csv&id=1q9spgoTIUEbpwTqBuY5ml-Q5tSmDpuHTMx2QJnIZIBk&gid=0'],\r\n\r\n       ['история россии и мира 8:10 Павловская','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=132554553'],\r\n       ['история россии и мира 8:10 Пригодич','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=0'],\r\n       ['история россии и мира 11:30 Пригодич','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=1821313907'],\r\n       ['история россии и мира 15:30 Пригодич','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=605593543'],\r\n       ['история россии и мира 9:50 Павловская','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=669992992'],\r\n       ['история россии и мира 11:30 Павловская','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=517652382'],\r\n       ['история россии и мира 13:30 Павловская','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=332322934'],\r\n       ['история россии и мира 15:30 Павловская','https://docs.google.com/spreadsheets/d/1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI/export?format=csv&id=1re6oAKcCWZPF1clxEKoffyu3zZgTiSQ5Zq-YAo0vzrI&gid=1487346128'],\r\n\r\n       ['история современных международных отношений 3.1', 'https://docs.google.com/spreadsheets/d/1ZnR6uFz1t_uCdMLAMYRPaT8CpsQB8ALK/export?format=csv&id=1ZnR6uFz1t_uCdMLAMYRPaT8CpsQB8ALK&gid=1753157777'],\r\n       ['история реформ и реформаторов 3.2', 'https://docs.google.com/spreadsheets/d/1AVP0_usl0u4d1VJ-W9dY83Z9XDXrfklK_OlxNc3oEbU/export?format=csv&id=1AVP0_usl0u4d1VJ-W9dY83Z9XDXrfklK_OlxNc3oEbU&gid=0'],\r\n\r\n       ['менеджмент 1.1','https://docs.google.com/spreadsheets/d/1unVwdDM0pBJEUeO6tCCZowzM8at2Db4HCVz_8zpEJms/export?format=csv&id=1unVwdDM0pBJEUeO6tCCZowzM8at2Db4HCVz_8zpEJms&gid=0'],\r\n       ['менеджмент 1.2','https://docs.google.com/spreadsheets/d/1BVhEkOZ7Yp7AuVSLIYAg9al3FVcBepVG76z2hDqm7Pg/export?format=csv&id=1BVhEkOZ7Yp7AuVSLIYAg9al3FVcBepVG76z2hDqm7Pg&gid=0'],\r\n       ['менеджмент 1.3','https://docs.google.com/spreadsheets/d/1JS8C1dBMrIqDKV6Or_iaoSasA7wnG67xNs72nlGuXtE/export?format=csv&id=1JS8C1dBMrIqDKV6Or_iaoSasA7wnG67xNs72nlGuXtE&gid=0'],\r\n       ['менеджмент 1.4','https://docs.google.com/spreadsheets/d/1RO9Z8TonVmE01S67zwRZbNY0TbeE21Z8ZXY5RQmn71c/export?format=csv&id=1RO9Z8TonVmE01S67zwRZbNY0TbeE21Z8ZXY5RQmn71c&gid=0'],\r\n       ['менеджмент 1.5','https://docs.google.com/spreadsheets/d/1thf6a69OaRzbuxT76CQBgr1BGrQCq7OGy88ck3EBuaE/export?format=csv&id=1thf6a69OaRzbuxT76CQBgr1BGrQCq7OGy88ck3EBuaE&gid=0'],\r\n\r\n       ['английский B1.2 7','https://docs.google.com/spreadsheets/d/1hHUUdHhO7uMSr-kFrAed1NVeA2vD-2NNVqyJQCJ2X9w/export?format=csv&id=1hHUUdHhO7uMSr-kFrAed1NVeA2vD-2NNVqyJQCJ2X9w&gid=474547065'],\r\n       ['английский A2 d4','https://docs.google.com/spreadsheets/d/1XvdFQUgAZqOZ4onHpVUDGlw3jDKmhC_Gm7IV0cbPprE/export?format=csv&id=1XvdFQUgAZqOZ4onHpVUDGlw3jDKmhC_Gm7IV0cbPprE&gid=474547065']]\r\n\r\ndef z(predmet):\r\n    for i in range(len(url)):\r\n        if url[i][0]==predmet:\r\n            return url[i][1]\r\n    return predmet\r\n\r\nbot.delete_webhook()\r\n\r\ndef lessons():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=3,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    start_button = types.KeyboardButton(\"start\")\r\n    btn1 = types.KeyboardButton(\"ОРГ\")\r\n    btn2 = types.KeyboardButton(\"Основы менеджмента\")\r\n    btn3 = types.KeyboardButton(\"История\")\r\n    btn4 = types.KeyboardButton(\"Английский язык\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    markup.add(btn3)\r\n    markup.add(btn4)\r\n    return markup\r\n\r\ndef cho_hosh():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=2,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.InlineKeyboardButton(\"Выбрать предмет\")\r\n    btn2 = types.InlineKeyboardButton(\"Пройти авторизацию заново\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    return markup\r\n\r\ndef H_Types():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=4,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"России и мира\")\r\n    btn2 = types.KeyboardButton(\"Реформы и реформаторы\")\r\n    btn3 = types.KeyboardButton(\"Современные международные отношения\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    markup.add(btn3)\r\n    return markup\r\n\r\ndef IRS_Potok():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=1,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"ирс 3.1\")\r\n    markup.add(btn1)\r\n    return markup\r\n\r\ndef H_Teachers():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=2,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"Павловская\")\r\n    btn2 = types.KeyboardButton(\"Пригодич\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    return markup\r\n\r\ndef H_time():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=5,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"8:10\")\r\n    btn2 = types.KeyboardButton(\"9:50\")\r\n    btn3 = types.KeyboardButton(\"11:30\")\r\n    btn4 = types.KeyboardButton(\"13:30\")\r\n    btn5 = types.KeyboardButton(\"15:30\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    markup.add(btn3)\r\n    markup.add(btn4)\r\n    markup.add(btn5)\r\n    return markup\r\n\r\ndef E_level():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=2,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"B1.2\")\r\n    btn2 = types.KeyboardButton(\"A2\")\r\n    markup.add(btn1)\r\n    markup.add(btn2)\r\n    return markup\r\n\r\ndef E_B12_groups():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=1,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"B1.2 7\")\r\n    markup.add(btn1)\r\n    return markup\r\n\r\ndef E_A2_groups():\r\n\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,      # автоматическое изменение размера\r\n        row_width=1,              # количество кнопок в строке\r\n        one_time_keyboard=True    # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    btn1 = types.KeyboardButton(\"A2 d4\")\r\n    markup.add(btn1)\r\n    return markup\r\n\r\ndef potokiORG():\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,  # автоматическое изменение размера\r\n        row_width=3,  # количество кнопок в строке\r\n        one_time_keyboard=True  # скрыть после использования\r\n    )\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    potok12 = types.KeyboardButton(\"орг 1.2\")\r\n    potok21 = types.KeyboardButton(\"орг 2.1\")\r\n    potok23 = types.KeyboardButton(\"орг 2.3\")\r\n    markup.add(potok12)\r\n    markup.add(potok21)\r\n    markup.add(potok23)\r\n    return markup\r\n\r\ndef potokimenegment():\r\n    markup = types.ReplyKeyboardMarkup(\r\n        resize_keyboard=True,  # автоматическое изменение размера\r\n        row_width=5,  # количество кнопок в строке\r\n        one_time_keyboard=True  # скрыть после использования\r\n    )\r\n\r\n    markup = types.ReplyKeyboardMarkup(row_width=3)\r\n    potok11 = types.KeyboardButton(\"ом 1.1\")\r\n    potok12 = types.KeyboardButton(\"ом 1.2\")\r\n    potok13 = types.KeyboardButton(\"ом 1.3\")\r\n    potok14 = types.KeyboardButton(\"ом 1.4\")\r\n    potok15 = types.KeyboardButton(\"ом 1.5\")\r\n    markup.add(potok11)\r\n    markup.add(potok12)\r\n    markup.add(potok13)\r\n    markup.add(potok14)\r\n    markup.add(potok15)\r\n    return markup\r\n\r\nusers = {}\r\nanswers = {\r\n    \"ОРГ\": {\r\n        \"new\": 0,\r\n        \"address\": \"ОРГ\",\r\n        \"answer\": \"Теперь выберите поток ОРГ\",\r\n        \"keyboard\": \"potokiORG\",\r\n        \"start\": \"org\"\r\n    },\r\n    \"Основы менеджмента\": {\r\n        \"new\": 0,\r\n        \"address\": \"менеджмент\",\r\n        \"answer\": \"Теперь выберите поток основ менеджмента\",\r\n        \"keyboard\": \"potokimenegment\",\r\n        \"start\": \"menegment\"\r\n    },\r\n    \"История\": {\r\n        \"new\": 0,\r\n        \"address\": \"история\",\r\n        \"answer\": \"Теперь выберите раздел истории\",\r\n        \"keyboard\": \"H_Types\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"Английский язык\": {\r\n        \"new\": 0,\r\n        \"address\": \"английский\",\r\n        \"answer\": \"Теперь выберите уровень английского языка\",\r\n        \"keyboard\": \"E_level\",\r\n        \"start\": \"english\"\r\n    },\r\n\r\n    \"B1.2\": {\r\n        \"new\": 1,\r\n        \"address\": \" B1.2\",\r\n        \"answer\": \"Теперь выберите группу\",\r\n        \"keyboard\": \"E_B12_groups\",\r\n        \"start\": \"english\"\r\n    },\r\n    \"A2\": {\r\n        \"new\": 1,\r\n        \"address\": \" A2\",\r\n        \"answer\": \"Теперь выберите группу\",\r\n        \"keyboard\": \"E_A2_groups\",\r\n        \"start\": \"english\"\r\n    },\r\n\r\n    \"A2 d4\": {\r\n        \"new\": 2,\r\n        \"address\": \" d4\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"english\"\r\n    },\r\n    \"B1.2 7\": {\r\n        \"new\": 2,\r\n        \"address\": \" 7\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"english\"\r\n    },\r\n\r\n    \"орг 1.2\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.2\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"org\"\r\n    },\r\n    \"орг 2.1\": {\r\n        \"new\": 2,\r\n        \"address\": \" 2.1\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"org\"\r\n    },\r\n    \"орг 2.3\": {\r\n        \"new\": 2,\r\n        \"address\": \" 2.3\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"org\"\r\n    },\r\n\r\n    \"ом 1.1\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.1\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"menegment\"\r\n    },\r\n    \"ом 1.2\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.2\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"menegment\"\r\n    },\r\n    \"ом 1.3\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.3\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"menegment\"\r\n    },\r\n    \"ом 1.4\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.4\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"menegment\"\r\n    },\r\n    \"ом 1.5\": {\r\n        \"new\": 2,\r\n        \"address\": \" 1.5\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"menegment\"\r\n    },\r\n\r\n    \"России и мира\": {\r\n        \"new\": 1,\r\n        \"address\": \" россии и мира\",\r\n        \"answer\": \"Теперь выберите время начала практики\",\r\n        \"keyboard\": \"H_time\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"Реформы и реформаторы\": {\r\n        \"new\": 1,\r\n        \"address\": \" реформ и реформаторов\",\r\n        \"answer\": \"Теперь выберите время начала практики\",\r\n        \"keyboard\": \"H_time\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"Современные международные отношения\": {\r\n        \"new\": 1,\r\n        \"address\": \" современных международных отношений\",\r\n        \"answer\": \"Теперь выберите поток\",\r\n        \"keyboard\": \"IRS_Potok\",\r\n        \"start\": \"irs\"\r\n    },\r\n\r\n    \"ирс 3.1\": {\r\n        \"new\": 2,\r\n        \"address\": \" 3.1\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"irs\"\r\n    },\r\n\r\n    \"8:10\":  {\r\n        \"new\": 1,\r\n        \"address\": \" 8:10\",\r\n        \"answer\": \"Теперь выбери преподавателя, который ведёт практику\",\r\n        \"keyboard\": \"H_Teachers\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"9:50\":  {\r\n        \"new\": 1,\r\n        \"address\": \" 9:50\",\r\n        \"answer\": \"Теперь выбери преподавателя, который ведёт практику\",\r\n        \"keyboard\": \"H_Teachers\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"11:30\":  {\r\n        \"new\": 1,\r\n        \"address\": \" 11:30\",\r\n        \"answer\": \"Теперь выбери преподавателя, который ведёт практику\",\r\n        \"keyboard\": \"H_Teachers\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"13:30\":  {\r\n        \"new\": 1,\r\n        \"address\": \" 13:30\",\r\n        \"answer\": \"Теперь выбери преподавателя, который ведёт практику\",\r\n        \"keyboard\": \"H_Teachers\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"15:30\":  {\r\n        \"new\": 1,\r\n        \"address\": \" 15:30\",\r\n        \"answer\": \"Теперь выбери преподавателя, который ведёт практику\",\r\n        \"keyboard\": \"H_Teachers\",\r\n        \"start\": \"history\"\r\n    },\r\n\r\n    \"Павловская\":  {\r\n        \"new\": 2,\r\n        \"address\": \" Павловская\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"history\"\r\n    },\r\n    \"Пригодич\":  {\r\n        \"new\": 2,\r\n        \"address\": \" Пригодич\",\r\n        \"answer\": \"Супер! вот ваши баллы:\",\r\n        \"start\": \"history\"\r\n    }\r\n}\r\n\r\n@bot.message_handler(commands=['start'])\r\ndef send_welcome(message):\r\n    chat_id = message.chat.id\r\n    users[chat_id] = {}\r\n    # Отправка сообщения с Reply-клавиатурой\r\n    bot.send_message(message.chat.id,\"Введите фамилию и имя через пробел\", reply_markup=types.ReplyKeyboardRemove())\r\n    bot.register_next_step_handler(message, save_username)\r\n\r\ndef save_username(message):\r\n    chat_id = message.chat.id\r\n    name = message.text\r\n    name = name.lower()\r\n    name = name.strip()\r\n    users[chat_id]['name'] = name\r\n    bot.send_message(chat_id,\"Выберите предмет по которому хотите узнать баллы\", reply_markup=lessons())\r\n\r\n# 5. Обработчик обычных кнопок\r\n@bot.message_handler(content_types=['text'])\r\ndef handle_reply_buttons(message):\r\n    if message.text == 'Выбрать предмет':\r\n        bot.send_message(message.chat.id, \"Выберите предмет по которому хотите узнать баллы\", reply_markup=lessons())\r\n        return\r\n    if message.text == 'Пройти авторизацию заново':\r\n        bot.send_message(message.chat.id, \"Введите фамилию и имя через пробел\", reply_markup=types.ReplyKeyboardRemove())\r\n        bot.register_next_step_handler(message, save_username)\r\n        return\r\n\r\n    if message.text not in answers:\r\n        bot.send_message(message.chat.id, 'странные у тебя запросы какие-то, переделывай', reply_markup=cho_hosh())\r\n        return\r\n\r\n    if answers[message.text]['new'] == 0:\r\n        users[message.chat.id]['fulladdress'] = answers[message.text]['address']\r\n    elif answers[message.text]['new'] == 1:\r\n        users[message.chat.id]['fulladdress'] += answers[message.text]['address']\r\n    elif answers[message.text]['new'] == 2:\r\n        users[message.chat.id]['fulladdress'] += answers[message.text]['address']\r\n\r\n        if z(users[message.chat.id]['fulladdress']) == users[message.chat.id]['fulladdress']:\r\n            bot.send_message(message.chat.id, 'Ты по моему перепутал, братанчик. Нет такой группы, иди лучше еще раз попробуй', reply_markup=cho_hosh())\r\n            return\r\n\r\n        if answers[message.text]['start'] == 'org':\r\n            bot.send_message(message.chat.id, answers[message.text]['answer'] + f' {(org(pars(z(users[message.chat.id]['fulladdress'])), message.chat.id))}')\r\n        elif answers[message.text]['start'] == 'menegment':\r\n            bot.send_message(message.chat.id, answers[message.text]['answer'] + f' {(menedgment(pars(z(users[message.chat.id]['fulladdress'])), message.chat.id))}')\r\n        elif answers[message.text]['start'] == 'history':\r\n            bot.send_message(message.chat.id, answers[message.text]['answer'] + f' {(history(pars(z(users[message.chat.id]['fulladdress'])), message.chat.id))}')\r\n        elif answers[message.text]['start'] == 'irs':\r\n            bot.send_message(message.chat.id, answers[message.text]['answer'] + f' {(irs(pars(z(users[message.chat.id]['fulladdress'])), message.chat.id))}')\r\n        elif answers[message.text]['start'] == 'english':\r\n            bot.send_message(message.chat.id, answers[message.text]['answer'] + f' {(english(pars(z(users[message.chat.id]['fulladdress'])), message.chat.id))}')\r\n        bot.send_message(message.chat.id, 'Что дальше?', reply_markup=cho_hosh())\r\n        return\r\n\r\n    if answers[message.text]['keyboard'] == 'potokiORG':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=potokiORG())\r\n    elif answers[message.text]['keyboard'] == 'potokimenegment':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=potokimenegment())\r\n    elif answers[message.text]['keyboard'] == 'H_Types':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=H_Types())\r\n    elif answers[message.text]['keyboard'] == 'H_time':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=H_time())\r\n    elif answers[message.text]['keyboard'] == 'H_Teachers':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=H_Teachers())\r\n    elif answers[message.text]['keyboard'] == 'IRS_Potok':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=IRS_Potok())\r\n    elif answers[message.text]['keyboard'] == 'E_level':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=E_level())\r\n    elif answers[message.text]['keyboard'] == 'E_B12_groups':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=E_B12_groups())\r\n    elif answers[message.text]['keyboard'] == 'E_A2_groups':\r\n        bot.send_message(message.chat.id, answers[message.text]['answer'], reply_markup=E_A2_groups())\r\n\r\nbot.polling()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/telegram_bot/hdvaj.py b/telegram_bot/hdvaj.py
--- a/telegram_bot/hdvaj.py	(revision d13bd10d11e3daac311d203cf1c24fe11bedf666)
+++ b/telegram_bot/hdvaj.py	(date 1759749739872)
@@ -20,8 +20,8 @@
             a = a.split('"')
             s1 = float(a[0].count('1'))
             s2 = float(a[1].replace(',', '.'))
-            # s3 = float((a[4].split(',')[-2]).replace(',', '.'))
-            return s1 + s2
+            s3 = float((a[-1].split(',')[-2]).replace(',', '.'))
+            return s1 + s2 +s3
 
     return 'ты не в этой группе'
 
